# ğŸŸ FishMate â€“ Smart IoT Aquaculture Monitoring System (Backend)

![Status](https://img.shields.io/badge/Status-Active_Development-brightgreen)
![Python](https://img.shields.io/badge/Python-3.10%2B-blue)
![FastAPI](https://img.shields.io/badge/FastAPI-0.95%2B-009688)
![Database](https://img.shields.io/badge/PostgreSQL-TimescaleDB-336791)

**FishMate** is a smart IoT-based aquaculture monitoring platform that combines **real-time sensor ingestion**, **time-series data storage**, and **machine learningâ€“driven water quality prediction** to prevent fish mortality and optimize yield.

This repository contains the **production-grade backend**, acting as the systemâ€™s brain â€” ingesting ESP32 sensor data, validating it, running ML inference, storing it efficiently, and serving it via APIs.

ğŸ”— **Frontend UI (Figma)**  
https://real-bask-81965835.figma.site/

---

## ğŸš€ Core Capabilities

### ğŸ“¡ Real-Time IoT Data Ingestion
- Handles **high-frequency ESP32 sensor writes**
- Fully validated using **Pydantic**
- Designed for horizontal scaling

**Tracked Parameters**
- ğŸ’§ Dissolved Oxygen (DO)
- ğŸŒ¡ï¸ Temperature
- ğŸ§ª pH
- ğŸŒ«ï¸ TDS / Turbidity
- â˜ ï¸ Ammonia (NHâ‚ƒ)
- ğŸ”‹ Device voltage & health

---

### ğŸ§  ML-Powered Water Quality Prediction
- **Random Forest Classifier**
- Real-time inference on every reading
- Stored alongside raw sensor data

**Prediction Classes**
- ğŸŸ¢ `EXCELLENT`
- ğŸŸ¡ `GOOD`
- ğŸ”´ `BAD`

**Extras**
- Confidence probability
- Rule-based + ML hybrid validation

---

### ğŸ’¾ Time-Series Optimized Storage
- **PostgreSQL + TimescaleDB**
- Sensor data stored as hypertables
- Optimized for:
  - High write throughput
  - Fast historical queries
  - Long-term storage

---

### ğŸ”” Intelligent Alert Readiness
- Threshold-based checks
- ML-based predictive flags
- Debouncing-ready service layer

---

## ğŸ› ï¸ Tech Stack

| Layer | Technology |
|---|---|
| API Framework | FastAPI |
| Language | Python 3.10+ |
| Database | PostgreSQL + TimescaleDB |
| ORM | SQLAlchemy |
| Validation | Pydantic |
| ML | Scikit-learn |
| Data Processing | Pandas |
| Deployment Ready | Uvicorn |

---

## ğŸ§© System Architecture (From Actual Codebase)

### ğŸ” End-to-End Data Flow
ESP32 Sensors
â†“ (HTTP JSON)
FastAPI Router
â†“
Service Layer
â†“
Quality Checks + ML Inference
â†“
TimescaleDB (Hypertables)
â†“
REST API â†’ Dashboard / Mobile App


---

## ğŸ“‚ Backend Architecture (Verified)

```bash
fishmate-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                  # FastAPI app entry point
â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚       â”œâ”€â”€ router.py        # API version router
â”‚   â”‚       â””â”€â”€ sensor.py        # Sensor endpoints
â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py            # Environment & settings
â”‚   â”‚   â””â”€â”€ security.py          # Security utilities
â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ sensor.py            # SQLAlchemy DB models
â”‚   â”‚   â””â”€â”€ fishmate_rf_latest_v1.pkl  # Trained ML model
â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ingestion.py         # Sensor ingestion logic
â”‚   â”‚   â”œâ”€â”€ quality_check.py     # Rule-based validation
â”‚   â”‚   â””â”€â”€ reading.py           # Read/query operations
â”‚
â”‚   â”œâ”€â”€ ml/
â”‚   â”‚   â”œâ”€â”€ model.py             # ML model loader
â”‚   â”‚   â””â”€â”€ predict.py           # Prediction logic
â”‚
â”‚   â””â”€â”€ db/
â”‚       â””â”€â”€ session.py           # DB session management
â”‚
â”œâ”€â”€ ml_training/
â”‚   â”œâ”€â”€ train_model.py           # Offline model training
â”‚   â””â”€â”€ data/                    # CSV datasets
â”‚
â”œâ”€â”€ .env                         # Environment variables
â”œâ”€â”€ run.sh                       # Startup script
â”œâ”€â”€ requirments.txt              # Python dependencies
â””â”€â”€ README.md
## âš¡ API Endpoints
###1ï¸âƒ£ Sensor Data Ingestion

POST /api/v1/sensor-data

{
  "device_id": "FM-001",
  "timestamp": "2026-01-11T10:30:00Z",
  "dissolved_oxygen": 5.2,
  "tds": 480,
  "ph": 7.1,
  "ammonia": 0.04,
  "temperature": 29.5,
  "voltage": 3.7
}


âœ” Validated
âœ” Stored
âœ” Classified
âœ” Scored

###2ï¸âƒ£ Latest Device Reading

GET /api/v1/sensor-data/latest/{device_id}

Returns:

Latest sensor values

ML classification

Confidence score

###3ï¸âƒ£ Historical Time-Series Data

GET /api/v1/sensor-data/history/{device_id}

Query Params

start_time

end_time

limit

Optimized for charts & analytics.

ğŸ”§ Installation & Setup
Prerequisites

Python 3.10+

PostgreSQL 14+


###1ï¸âƒ£ Clone & Install
git clone https://github.com/yourusername/fishmate-backend.git
cd fishmate-backend
pip install -r requirments.txt

###2ï¸âƒ£ Environment Configuration

Create .env:

DATABASE_URL=postgresql://user:password@localhost:5432/fishmate_db
SECRET_KEY=super_secret_key

###3ï¸âƒ£ Run Server
uvicorn app.main:app --reload


###ğŸ“˜ Swagger UI
http://localhost:8000/docs

ğŸ”® Roadmap

 Docker & Docker Compose

 MQTT ingestion (ESP32 native)

 Role-based authentication

 Flutter mobile app

 Automated ML retraining

 Alert notification service (SMS / Push)

### Â© 2026 FishMate Project
Smart Aquaculture powered by IoT & AI
